\chapter{Signal generation}

The different signal generation modes are only available with a ATmega328 processor.
You must also enable the dialog function with the Makefile option WITH\_MENU.
The menu is called by a long key press. The available functions are shown in the
second row of the LCD. You can select the shown function by a long key press.
The next function in automatically shown after 5 seconds or after a short key press.

\label{sec:generation}
\section{Frequency Generation}
The frequency generation is started, if you select the ''f-Generator'' function by
a long key press.
The frequency output is done with the \(680\Omega\) resistor at measurement port TP2.
The measurement port TP1 is switched to GND.
The frequencies are build with the 16~bit counter from the CPU clock frequency 
(\(8MHz\) or \(16MHz\)).
The frequency can be selected for each digit position beginning with the 1Hz position with the digits 0-9.
The highest selectable position is the 100kHz position. For this position numericals between 0 and 20 can be selected.
Therefore frequencies up to 2Mhz are selectable.
Without the rotary encoder the position value can be increased with a short key press (\textless~0.8s).
With a rotary encoder you can change the position value in any direction.
With a longer key press you can change the position of digit change.
With a symbol in row 1 of the frequency line the direction of the position change is shown. 
A \textgreater~symbol in row 1 indicate, that the next higher position will be selected.
With a \textless~symbol in row 1 the next position will be the lower position (down to 1Hz).
If the highest digit position (100kHz) is selected, the \textgreater~symbol is replaced by the character R.
In this condition the longer key press will reset the frequency value to the initial value (1Hz).
Because not every selected frequency can be generated correctly with the counter,
the difference to the real generated frequency is shown in line 3 or behind the frequency value.
If you hold the key pressed for a long time (\textgreater~1.4s), you can return to the dialog function and select
the same or another function.

\section{Puls width generation}
The Puls Width generator is started, if you select the ''10-Bit PWM'' function by
a long key press.
The frequency output is done with the \(680\Omega\) resistor at measurement port TP2.
The measurement port TP1 is switched to GND.
The frequency of the output signal is always the CPU clock divided by 1024.
This gives a result of \(7812.5Hz\) for the 8 MHz CPU clock.
Only the positive pulse width can be changed by a key press. With a short key press
you can increase the positive puls width up to \(99\%\) in \(1\%\) increments.
With a longer key press you can increase the pulse width in \(10\%\) increments.
The pulse width reaches a value above \(99\%\) 100 is subtract from the result.
The pulse width \(0\%\) generates a very small positive puls width.

